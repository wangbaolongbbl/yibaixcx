## （一）企业自己自己注册小程序（卖产品）
### 1、企业注册
1、注册一个邮箱，可以是QQ邮箱也可以是其他邮箱，用来后面微信小程序的注册。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001545nyjl04j1or4qrq4i.png "Title")

2、[登陆微信公众平台](https://mp.weixin.qq.com/)，单击右上角的“立即注册”，点击“小程序”模块。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001607z4zi67egqzqtnicp.png "Title")

3、账号信息填写。每个邮箱只能申请一个小程序，点击“注册”，跳转到邮箱激活页。


![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001650zt6l3o5459l4sd25.png "Title")

4、邮箱激活。点击“登录邮箱”填写邮箱密码进入邮箱，在收件箱里查询激活邮件点击激活，自动跳转会微信公众平台进行信息登记。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001707njzmhxpgjbhjghgb.png "Title")


5、用户信息登记。可以根据自身主体类型进行选择，本文以“企业”为准。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001727jxdrms1k3ddxzosl.png "Title")


6、主体信息登记。企业名称必须和营业执照上的名字一致，不然审核不通过全部信息重新填写，注册方式可以是对公账户打款或者是微信认证，相对而言微信认证方式会快捷方便，建议首选。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001745j9owo9qdtqityu9z.png "Title")


7、管理员信息登记。这里信息完成后代表认证成功，开始创建小程序。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/001813nc2nh7whztwrdzpt.png "Title")



8、、小程序微信认证。注意：每一个小程序号的认证都需要支付300元

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002202pv7ylivkwp6f5lym.png "Title")

9、身份验证

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002242jkk0903qilb49ll3.png "Title")

10、、账号验证分为四步，包括同意协议、填写资料、填写发票、支付费用。此处是同意协议，签署《微信公众平台认证服务协议》，勾选同意，点击下一步。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002327izf6c68c3k2rhfrz.png "Title")

11、、填写资料。选择认证主体类型，提交相应的认证材料

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002349r666jeizxap677vi.png "Title")

12、企业业务资料

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002418lj4l3300lzj7ntjq.png "Title")

13、管理员信息填写。管理员信息填写的里有手机号码填写以及二维码的扫描，建议先把本页所有的信息先填写完毕，并在“企业基本资料”的公函下载打印，管理员签名并盖上公章拍照上传后再进行填写，因为手机验证码以及二维码具有有效时间，超时需要重新操作。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002544ehptu2gynu99639s.png "Title")

14、企业基本资料。下载公函打印后需要签名加盖公章，再拍照上传，公章需要非常清晰，不然审核不通过需要进行邮件申诉。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002714pq43ju3x33u19e6q.png "Title")
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002728x7ovquqrqqomy773.png "Title")
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002743jvs0040as04rmrmm.png "Title")

15、发票填写。可选择开具普通发票（定额发票）、增值税专用发票。增值税专用发票还需提交《税务登记证》（办理三证合一的企业直接上传新的营业执照）、《银行开户证明》，审核公司会对资质进行审核。资质审核通过后由腾讯公司开具并寄送发票。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002850atotuu8vwgnbubin.png "Title")
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002858x7w5zvjaf8sv7fho.png "Title")
![alt text](http://bbs.zhichiwangluo.com/ "Title")

16、支付费用。这是注册的最后一个操作步骤。

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/15/002929jz2ekm17uymq2myp.png "Title")

17、支付完成后，进入认证审核。页面上会公布第三方审核公司的联系方式，在审核过程中该公司将有可能与你联系沟通，如果在审核过程中遇到问题，可以拨打该公司的热线电话进行咨询。

### 2、使用医百小程序商城模板
#### 企业登录商城选择模板（非空白）
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/24/154548lesonsy3rnr1njov.png "Title")

#### 企业登录商城选择空白模板，一步步搭建
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/24/154709guiifutnuazx1188.png "Title")

### 3、填写相关信息使用商城打包生成你代码
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/24/165102zpg1lgpxgzxghvsg.png "Title")

- 需前往微信公众平台申请小程序账号，登录小程序账号，在设置-开发设置获取AppId

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/24/165457kx9xfxqrtfyyomut.png "Title")
- AppSecret（小程序密钥）
    微信公众平台登录小程序账号，在设置-开发设置里获取首次获取小程序密钥后谨慎保存，千万不要重置。重置密钥会导致小程序体验故障。

- 服务器配置 
    同样微信公众平台登录小程序账号，在设置-开发设置-服务器域名里填写即可使用了即速应用后台，微信小程序服务器域名请统一填写以下4个域名
1. xcx.yibai.com
2. xcx.yibai.cn
3. jisuapp.yibai.com
4. jisuapp.yibai.cn

- 设置完成，回到即速应用小程序打包页面填入微信AppID（小程序ID）和AppSecret(小程序密钥) ，选择相应类目，点击［打包］将代码包下载到桌面并解压，解压后的 首目录 就是小程序代码文件

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201705/24/173559qvcjr881jk4m8jfu.png "Title")

### 4、微信开发工具上传小程序项目/审核/上线
- 步骤一：下载并安装微信开发者工具，打开工具，小程序管理员微信号或小程序绑定的开发者微信号扫码登录
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/141954rut27ktgti4takik.png "Title")

- 步骤二：手机微信客户端收到登陆提醒，确认登录

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/142821cgsgpg2f71pfsf5v.png "Title")

- 步骤三：确认登录后，选择小程序项目

![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/142334tv4j6669f6hvfrol.png "Title")


- 步骤四：完善小程序项目信息
      进入小程序项目编辑页面，填写APPID（即小程序ID）、项目名称（建议填写字母） 、选择项目目录（选择如图右上角代码包解压后的首目录），确定
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/143114n7fhy5y5qwe5edqd.png "Title")

- 步骤五：在线调试小程序
      点击开发者工具右上角-模拟器、编辑器、调试器，可查看小程序的结构和代码。点击预览，可手机扫码体验小程序！
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/143632uab91rku07kgkbdu.png "Title")

- 步骤六：完善小程序项目设置
        域名信息点击调试界面右上角-详情，可进行项目设置，查看域名信息（设置勾选可参考下图）备注，域名需配置成 xcx.zhichiweiye.com（填写错误提示request：fail 不在以下合法域名列表中），修改域名请在微信公众平台登陆微信小程序账号－设置 - 开发设置 - 服务器域名中修改，微信开发者工具是不提供域名修改的！
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201801/19/144618ic2as9gbbfo9c8b9.jpg "Title")

- 步骤七：上传小程序至微信公众平台调试完成，点击上传，填写版本号和项目备注，确定
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/153751jf5boub0vwsbehhb.png "Title")

- 步骤八：微信公众平台提交审核接着微信公众平台登录小程序，开发管理-开发版本-提交审核
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/154107psk57ikomsgjsrzl.png "Title")

- 步骤九：同意微信小程序开发协议勾选已阅读，点击下一步
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/154339r2ctc4vxgt4kvvv5.png "Title")

- 步骤十：完善小程序功能页面信息
      填写至少一个功能页面信息（可以点击添加功能页面），提交审核，等待微信审核（约2/3个工作日），通过审核后即可在微信客户端搜索你的小程序了
![alt text](http://bbs.zhichiwangluo.com/data/attachment/forum/201710/10/154420m6t78nfthhf77fnq.png "Title")

## (二)企业都在医百小程序里（做平台）
### 入口（小程序前端代码大小有限制）
- 给平台内商家生成他主页地址的二维码->扫二维码
- 订餐类小程序，通过地理位置选择哪个店(麦当劳、肯德基)

![alt text](https://s7.postimg.org/ijfijwcgb/image.jpg "Title")
- 通过平台内的指引选择或者搜索某个商户
- 安卓手机可以把小程序内的某个页面，添加到桌面生成app图标

小程序的入口被限定了，一般只能通过搜索或者扫码进入。搜索只针对小程序注册用户，和平台内的商家无关。


平台内的商家是不能用：
- 微信内的小程序搜索
- 附近的小程序


## (三)小程序消息推送
小程序通过模板消息实现消息推送。例如：
- 当消费者购买商品后，如何通知他们东西发货了呢？
- 如果用户报名成功，怎么样快速又方便地告知他们报名结果呢？
- 我预约了一场直播，通知他这场直播要开始了？

这时候，我们就需要用到小程序的「模板消息」接口。

官方文档中规定，用户在小程序中进行支付或提交表单，小程序才能向用户发送模板消息。小程序不能通过模板消息接口，群发推广信息、垃圾信息等。
### 如何发送模板消息
微信小程序发送模板消息的大致步骤是：
1. 开发者在微信公众平台，创建一个新的消息模板；
2. 获取支付过程或提交过程中，微信返回的消息发送码；
3. 开发者利用消息发送码，带上模板中非固定的信息，向微信发起发送消息的请求。

### 创建新的消息模板

- 打开 https://mp.weixin.qq.com 并登录小程序帐户。
- 点击左侧菜单中的「模板消息」。
- 进入顶部的「模板库」，从微信预置的模板中，选择一个合适的模板。
- 确定模板中所使用的关键词。

如果关键词列表中没有你希望使用的关键词，你可以申请新的关键词。但申请新的关键词需要提交审核。
![alt text](http://mmbiz.qpic.cn/mmbiz_jpg/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtx2d1yIN0zUKOSJicj1B9wGpTo9llaEVxtFbaaD1fkNyzcdMpXSrltIw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1 "Title")

模板添加后，会获得模板 ID（template_id），稍后就可以用到它。

![alt text](http://mmbiz.qpic.cn/mmbiz_jpg/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtQs9DMpljAnnxibsibxpFdsshyc8ddl0oxuYJwtImJBuB3auODLdstJpQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1 "Title")

#### 获取模板消息发送码
创建消息模板后，还需要「发送码」，才能发送模板消息。
以提交表单为例，看看发送码的获取方式。
首先，在小程序中，放置一个带有 report-submit 属性的表单：

![alt text](http://mmbiz.qpic.cn/mmbiz_png/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtcx1Ef9Vj3qn1F3LYxPYwQxan6kXhKUENojl2URhgavDcYZhbRw1cUw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1 "Title")

然后，在页面的 Page() 函数中，新建一个提交表单的函数。
在函数中，就能接收到 formId，也就是发送码了。
![alt text](http://mmbiz.qpic.cn/mmbiz_png/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtgvj81iadMfvvm9ote2u9SJ0YvRVO5hszIdAR44UqPD6juHbw9WicCpeg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1 "Title")
如果你想在微信发起支付请求后，获取发送码，那么你需要调用微信支付中的「统一下单」接口。
当「统一下单」接口请求成功之后，回调值中的「预支付交易会话标识」，也就是 prepay_id，就可以作为发送码来使用。
#### 发送模板消息
经过这么多步骤，终于可以向用户发送模板消息了。在这一步，所有过程都是在开发者的服务器完成。
首先，通过 GET 方式，获取到小程序的 Access Token：

![alt text](http://mmbiz.qpic.cn/mmbiz_png/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtvpmzFUzXSkq16FMHRibh5eNDmnkCFhleVGrCbceOichZziaHbwqGWibUwQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1 "Title")

接着，用 POST 方式，向微信提交模板消息的发送请求。
请求地址为：

![alt text](http://mmbiz.qpic.cn/mmbiz_png/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtyV4ZIGuwQVBZs4dpOxYyqH2v0rtF0Iqiclxwo7yK7jH4ibvdMCM2PWkA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1 "Title")

请求数据的格式如下：

![alt text](http://mmbiz.qpic.cn/mmbiz_png/dzvQgHlKewx2Nbx5PeUqNeichrTsgCzPtTY6AC3Bw6ze1IqibRRiblhaPpex41qTk7xZpHDb5EfgI6nXvlRveTdaQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1 "Title")

当接口返回成功消息时，就代表着模板消息已经发送出去了。

### 客服消息
客服消息会话入口有两个：

1、小程序内：开发者在小程序内添加客服消息按钮组件，用户可在小程序内唤起客服会话页面，给小程序发消息；

2、已使用过的小程序客服消息会聚合显示在微信会话“小程序客服消息”内，用户可以在小程序外查看历史客服消息，并给小程序客服发消息。

![alt text](https://mp.weixin.qq.com/debug/wxadoc/introduction/image/x11.png "Title")


![alt text]( "Title")
